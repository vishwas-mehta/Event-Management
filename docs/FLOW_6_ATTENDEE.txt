================================================================================
          FULL-STACK FLOW #6: ATTENDEE FEATURES
          End-to-End: Dashboard, Reviews, Waitlist, Profile
================================================================================

This document explains all attendee-specific features in the application.

================================================================================
PART 1: ATTENDEE DASHBOARD
================================================================================

PAGE: /attendee/dashboard (AttendeeDashboard.tsx)

VISUAL LAYOUT:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Welcome back, Jane!                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  QUICK STATS                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚      5       â”‚  â”‚      3       â”‚  â”‚      2       â”‚  â”‚      1       â”‚     â”‚
â”‚  â”‚ Total Books  â”‚  â”‚  Upcoming    â”‚  â”‚  Attended    â”‚  â”‚  On Waitlist â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  UPCOMING EVENTS                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ðŸŽµ Concert 2024                                                        â”‚ â”‚
â”‚  â”‚    ðŸ“… July 15, 2024  |  ðŸŽ« VIP Ã— 2  |  âœ“ Confirmed                    â”‚ â”‚
â”‚  â”‚                                              [View Details]             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ðŸ’¼ Tech Workshop                                                       â”‚ â”‚
â”‚  â”‚    ðŸ“… July 20, 2024  |  ðŸŽ« Regular Ã— 1  |  âœ“ Confirmed                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  QUICK LINKS                                                                  â”‚
â”‚  [Browse Events]  [My Bookings]  [My Reviews]  [My Profile]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


DATA SOURCE:
    - Bookings come from GET /api/attendee/bookings
    - Filtered on frontend to show upcoming/past


================================================================================
PART 2: REVIEWS SYSTEM
================================================================================

WHO CAN REVIEW:
    - Only users who ATTENDED an event can write a review
    - Must have booking with status = 'attended'


PAGE: /events/:id (Reviews Section in EventDetailsPage)

VISUAL LAYOUT:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  REVIEWS & RATINGS                           Average: â­â­â­â­â˜† (4.2)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ðŸ‘¤ John Doe                â­â­â­â­â­  âœ“ Verified Attendee              â”‚ â”‚
â”‚  â”‚ Jan 16, 2024                                                           â”‚ â”‚
â”‚  â”‚ "Amazing event! The organization was perfect and the performances..."  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ðŸ‘¤ Jane Smith              â­â­â­â­â˜†  âœ“ Verified Attendee              â”‚ â”‚
â”‚  â”‚ Jan 15, 2024                                                           â”‚ â”‚
â”‚  â”‚ "Great event overall. Venue was a bit crowded but still enjoyed it."   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  [Load More Reviews]                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


WRITE REVIEW (Only for Past Attended Events):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WRITE A REVIEW                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Your Rating: â­â­â­â­â˜† (click to rate)                                     â”‚
â”‚                                                                              â”‚
â”‚  Your Review:                                                                â”‚
â”‚  [_______________________________________________________________________]  â”‚
â”‚  [_______________________________________________________________________]  â”‚
â”‚                                                                              â”‚
â”‚                                                    [Submit Review]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


CREATE REVIEW API:
    POST /api/attendee/events/:eventId/reviews
    Body: {
        rating: 4,
        comment: "Great event! Very well organized...",
        mediaFiles: []
    }


BACKEND (attendee.controller.ts - createReview):
    createReview = asyncHandler(async (req, res) => {
        const { eventId } = req.params;
        const userId = req.user.userId;
        const { rating, comment, mediaFiles } = req.body;
        
        // Validation
        if (!rating || rating < 1 || rating > 5) {
            throw new ValidationError('Rating must be between 1 and 5');
        }
        
        // Check if already reviewed
        const existingReview = await this.reviewRepository.findOne({
            where: { userId, eventId },
        });
        
        if (existingReview) {
            throw new ConflictError('You have already reviewed this event');
        }
        
        // CRITICAL: Verify user ATTENDED the event
        const attendedBooking = await this.bookingRepository.findOne({
            where: {
                userId,
                eventId,
                status: BookingStatus.ATTENDED,  // Must have attended!
            },
        });
        
        if (!attendedBooking) {
            throw new ForbiddenError(
                'You can only review events you have attended. Please mark your attendance first.'
            );
        }
        
        // Create review
        const review = this.reviewRepository.create({
            userId,
            eventId,
            rating,
            comment,
            mediaFiles,
            isVerifiedAttendee: true,
        });
        
        await this.reviewRepository.save(review);
        
        return sendSuccess(res, { review }, 'Review created', 201);
    });


GET REVIEWS (Public API):
    GET /api/events/:eventId/reviews?page=1&limit=10

    getEventReviews = asyncHandler(async (req, res) => {
        const { eventId } = req.params;
        const page = parseInt(req.query.page) || 1;
        const limit = parseInt(req.query.limit) || 10;
        
        const [reviews, total] = await this.reviewRepository.findAndCount({
            where: { eventId },
            relations: ['user'],
            skip: (page - 1) * limit,
            take: limit,
            order: { createdAt: 'DESC' },
        });
        
        // Calculate average
        const avgRating = total > 0
            ? reviews.reduce((sum, r) => sum + r.rating, 0) / total
            : 0;
        
        return sendSuccess(res, {
            reviews,
            pagination: { total, page, limit, totalPages: ... },
            averageRating: avgRating,
        });
    });


UPDATE/DELETE REVIEW:
    PUT /api/attendee/reviews/:id       â†’ updateReview
    DELETE /api/attendee/reviews/:id    â†’ deleteReview


================================================================================
PART 3: WAITLIST SYSTEM
================================================================================

WHEN IS WAITLIST USED?
    - When all tickets are sold out
    - User wants to be notified if cancellations happen


JOIN WAITLIST UI (in EventDetailsPage):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SELECT TICKETS                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â­ VIP                                          $99.99                 â”‚ â”‚
â”‚  â”‚    VIP access with premium benefits                                    â”‚ â”‚
â”‚  â”‚    âŒ SOLD OUT                                                         â”‚ â”‚
â”‚  â”‚                                    [Join Waitlist]                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


After joining:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â­ VIP                                          $99.99                   â”‚
â”‚     VIP access with premium benefits                                       â”‚
â”‚     âœ“ You're #3 on the waitlist                                           â”‚
â”‚                                    [Leave Waitlist]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


JOIN WAITLIST API:
    POST /api/attendee/events/:eventId/waitlist
    Body: { ticketTypeId: "uuid" }


BACKEND (attendee.controller.ts - joinWaitlist):
    joinWaitlist = asyncHandler(async (req, res) => {
        const { eventId } = req.params;
        const userId = req.user.userId;
        const { ticketTypeId } = req.body;
        
        // Check if event exists
        const event = await this.eventRepository.findOne({
            where: { id: eventId },
        });
        if (!event) throw new NotFoundError('Event not found');
        
        // Check if already on waitlist
        const existingWaitlist = await this.waitlistRepository.findOne({
            where: { userId, eventId, ticketTypeId },
        });
        if (existingWaitlist) {
            throw new ConflictError('You are already on the waitlist');
        }
        
        // Get position (last position + 1)
        const lastPosition = await this.waitlistRepository
            .createQueryBuilder('waitlist')
            .where('waitlist.eventId = :eventId', { eventId })
            .andWhere('waitlist.ticketTypeId = :ticketTypeId', { ticketTypeId })
            .orderBy('waitlist.position', 'DESC')
            .getOne();
        
        const position = lastPosition ? lastPosition.position + 1 : 1;
        
        // Create waitlist entry
        const waitlist = this.waitlistRepository.create({
            userId,
            eventId,
            ticketTypeId,
            position,
            status: WaitlistStatus.WAITING,
        });
        
        await this.waitlistRepository.save(waitlist);
        
        return sendSuccess(res, {
            message: 'Successfully joined waitlist',
            position
        }, 'Joined waitlist', 201);
    });


LEAVE WAITLIST:
    DELETE /api/attendee/events/:eventId/waitlist

    leaveWaitlist = asyncHandler(async (req, res) => {
        const { eventId } = req.params;
        const userId = req.user.userId;
        
        const waitlist = await this.waitlistRepository.findOne({
            where: { userId, eventId },
        });
        
        if (!waitlist) throw new NotFoundError('Waitlist entry not found');
        
        await this.waitlistRepository.remove(waitlist);
        
        return sendSuccess(res, { message: 'Successfully left waitlist' });
    });


GET MY WAITLISTS:
    GET /api/attendee/waitlist

    getMyWaitlists = asyncHandler(async (req, res) => {
        const userId = req.user.userId;
        
        const waitlists = await this.waitlistRepository.find({
            where: { userId },
            relations: ['event', 'ticketType'],
            order: { createdAt: 'DESC' },
        });
        
        return sendSuccess(res, { waitlists });
    });


WAITLIST NOTIFICATION (When Booking Cancelled):
    In cancelBooking(), after restoring ticket capacity:
    
    // Check waitlist for notifications
    const waitlistUsers = await em.getRepository(Waitlist).find({
        where: {
            eventId: booking.eventId,
            ticketTypeId: booking.ticketTypeId,
            status: WaitlistStatus.WAITING,
        },
        order: { position: 'ASC' },
        take: booking.quantity,  // Only notify as many as tickets freed
    });
    
    // In production: Send email/notification to these users


================================================================================
PART 4: USER PROFILE
================================================================================

PAGE: /profile (ProfilePage.tsx)

VISUAL LAYOUT:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  My Profile                                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ First Name:   [John________________]                                    â”‚â”‚
â”‚  â”‚ Last Name:    [Doe_________________]                                    â”‚â”‚
â”‚  â”‚ Email:        john@email.com (cannot change)                            â”‚â”‚
â”‚  â”‚ Phone:        [+1 234-567-8900_____]                                    â”‚â”‚
â”‚  â”‚ Profile Image URL: [https://..._____]                                   â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚                                           [Save Changes]                 â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  CHANGE PASSWORD                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Current Password: [______________]                                      â”‚â”‚
â”‚  â”‚ New Password:     [______________]                                      â”‚â”‚
â”‚  â”‚ Confirm Password: [______________]                                      â”‚â”‚
â”‚  â”‚                                           [Update Password]              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


UPDATE PROFILE API:
    PUT /api/auth/profile
    Body: {
        firstName: "John",
        lastName: "Doe",
        phoneNumber: "+1 234-567-8900",
        profileImage: "https://..."
    }


GET CURRENT USER:
    GET /api/auth/me
    
    Returns user data for profile display


================================================================================
PART 5: REPORT EVENT
================================================================================

Any attendee can report an inappropriate event:

VISUAL (Report Button in Event Details):
    [Report Event ðŸš©]

REPORT MODAL:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Report Event                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Why are you reporting this event?                                           â”‚
â”‚                                                                              â”‚
â”‚  [_______________________________________________________________________]  â”‚
â”‚  [_______________________________________________________________________]  â”‚
â”‚  [_______________________________________________________________________]  â”‚
â”‚                                                                              â”‚
â”‚                                    [Cancel]  [Submit Report]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


API CALL:
    POST /api/events/:id/report
    Body: { reason: "This event contains inappropriate content..." }


BACKEND (event.controller.ts - reportEvent):
    reportEvent = asyncHandler(async (req, res) => {
        const { id } = req.params;
        const { reason } = req.body;
        const userId = req.user.userId;
        
        if (!reason) {
            throw new ValidationError('Reason is required');
        }
        
        const event = await this.eventRepository.findOne({
            where: { id },
        });
        
        if (!event) throw new NotFoundError('Event not found');
        
        // Create report
        const report = this.reportRepository.create({
            eventId: id,
            reportedById: userId,
            reason,
        });
        
        await this.reportRepository.save(report);
        
        // Mark event as reported (for admin visibility)
        event.isReported = true;
        event.reportReason = reason;
        await this.eventRepository.save(event);
        
        return sendSuccess(res, { message: 'Event reported successfully' });
    });


WHAT HAPPENS AFTER:
    - Report appears in admin dashboard
    - Admin can resolve (dismiss) or delete event
    - See FLOW_4_ADMIN.txt for admin handling


================================================================================
PART 6: ALL ATTENDEE API ROUTES
================================================================================

FILE: /backend/src/routes/attendee.routes.ts

    // All routes require attendee authentication
    router.use(authenticate, authorize([UserRole.ATTENDEE]));
    
    // Bookings
    POST   /attendee/bookings                  â†’ bookTicket
    GET    /attendee/bookings                  â†’ getMyBookings
    GET    /attendee/bookings/:id              â†’ getBookingById
    DELETE /attendee/bookings/:id              â†’ cancelBooking
    POST   /attendee/bookings/:id/attend       â†’ markAttendance
    
    // Reviews
    POST   /attendee/events/:eventId/reviews   â†’ createReview
    PUT    /attendee/reviews/:id               â†’ updateReview
    DELETE /attendee/reviews/:id               â†’ deleteReview
    
    // Waitlist
    POST   /attendee/events/:eventId/waitlist  â†’ joinWaitlist
    DELETE /attendee/events/:eventId/waitlist  â†’ leaveWaitlist
    GET    /attendee/waitlist                  â†’ getMyWaitlists


PUBLIC ATTENDEE-RELATED ROUTES (no auth required):
    GET /events/:eventId/reviews              â†’ getEventReviews


================================================================================
PART 7: DATABASE ENTITIES
================================================================================

REVIEW ENTITY:
    @Entity('reviews')
    export class Review {
        @PrimaryGeneratedColumn('uuid')
        id: string;
        
        @Column()
        userId: string;
        
        @Column()
        eventId: string;
        
        @Column()
        rating: number;  // 1-5
        
        @Column({ nullable: true })
        comment: string;
        
        @Column('simple-array', { nullable: true })
        mediaFiles: string[];
        
        @Column({ default: false })
        isVerifiedAttendee: boolean;
        
        @CreateDateColumn()
        createdAt: Date;
        
        @ManyToOne(() => User)
        user: User;
        
        @ManyToOne(() => Event)
        event: Event;
    }


WAITLIST ENTITY:
    @Entity('waitlists')
    export class Waitlist {
        @PrimaryGeneratedColumn('uuid')
        id: string;
        
        @Column()
        userId: string;
        
        @Column()
        eventId: string;
        
        @Column({ nullable: true })
        ticketTypeId: string;
        
        @Column()
        position: number;  // Queue position
        
        @Column({
            type: 'enum',
            enum: WaitlistStatus,
            default: WaitlistStatus.WAITING,
        })
        status: WaitlistStatus;
        
        @CreateDateColumn()
        createdAt: Date;
        
        @ManyToOne(() => User)
        user: User;
        
        @ManyToOne(() => Event)
        event: Event;
        
        @ManyToOne(() => TicketType)
        ticketType: TicketType;
    }
    
    enum WaitlistStatus {
        WAITING = 'waiting',
        NOTIFIED = 'notified',
        EXPIRED = 'expired',
    }


================================================================================
SUMMARY: ATTENDEE FEATURES
================================================================================

BROWSE & BOOK:
    Browse Events â†’ Select Event â†’ Book Tickets â†’ Payment â†’ Confirmation
    (See FLOW_5_BOOKINGS.txt for details)

VIEW BOOKINGS:
    Dashboard â†’ My Bookings â†’ See upcoming/past events

MARK ATTENDANCE:
    My Bookings â†’ (after event starts) â†’ Mark Attendance

WRITE REVIEW:
    My Bookings â†’ Past Events â†’ (if attended) â†’ Write Review
    OR: Event Details Page â†’ Reviews Section â†’ Write Review

WAITLIST:
    Event Details â†’ (sold out ticket) â†’ Join Waitlist
    When someone cancels â†’ You get notified â†’ Book ticket

REPORT EVENT:
    Event Details â†’ Report Flag â†’ Submit Report â†’ Admin reviews

PROFILE:
    Profile Page â†’ Update personal info â†’ Save Changes

================================================================================
